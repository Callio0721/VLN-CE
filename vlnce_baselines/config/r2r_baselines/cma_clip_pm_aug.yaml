BASE_TASK_CONFIG_PATH: habitat_extensions/config/vlnce_task_aug.yaml
SIMULATOR_GPU_IDS: [0,1,2,3]
TORCH_GPU_ID: 0
NUM_ENVIRONMENTS: 2 # âš ï¸ é«˜èƒ½é¢„è­¦ï¼šçœ‹ä¸‹æ–‡çš„è¯¦ç»†è§£é‡Š
TENSORBOARD_DIR: data/tensorboard_dirs/cma_clip_pm_aug
CHECKPOINT_FOLDER: data/checkpoints/cma_clip_pm_aug
EVAL_CKPT_PATH_DIR: data/checkpoints/cma_clip_pm_aug
RESULTS_DIR: data/checkpoints/cma_clip_pm_aug/evals

EVAL:
  USE_CKPT_CONFIG: False
  SPLIT: val_unseen
  EPISODE_COUNT: -1

IL:
  # å®˜æ–¹é»˜è®¤æ˜¯ 45ï¼Œå¯¹äº CLIP è¿™ç§æ”¶æ•›å¿«çš„æ¨¡å‹ï¼Œæˆ–è®¸ 15-20 ä¹Ÿå°±å¤Ÿäº†
  # ä½†ä¸ºäº†ç¨³å¦¥éµå¾ªå®˜æ–¹åšæ³•ï¼Œä¿æŒ 45 æ²¡é—®é¢˜ï¼ˆåæ­£è®­ç»ƒå¾ˆå¿«ï¼‰
  epochs: 45
  batch_size: 3

  DAGGER:
    iterations: 1 # è¿™é‡Œçš„ 1 ä»£è¡¨ Teacher Forcing (è¡Œä¸ºå…‹éš†)
    
    # âš ï¸ å…³é”®ç‚¹ï¼šè¿™æ˜¯æ•°æ®é‡
    # 157232 æ˜¯ R2R åŸå§‹æ•°æ® + Augåˆæˆæ•°æ®çš„æ€»å’Œ
    # ä½ çš„æ¨¡å‹éœ€è¦å…ˆæŠŠè¿™ 15ä¸‡æ¡ æ•°æ®çš„ç‰¹å¾è·‘å‡ºæ¥å­˜ç¡¬ç›˜
    update_size: 157232 # åŸæœ¬æ˜¯157232
    
    p: 1.0

    # True = ç›´æ¥ä»ç¡¬ç›˜åŠ è½½ lmdb_features_dir é‡Œçš„æ•°æ®è¿›è¡Œè®­ç»ƒ
    # False = æ¸…ç©ºè¯¥ç›®å½•ï¼Œé‡æ–°å¯åŠ¨ä»¿çœŸç¯å¢ƒé‡‡é›†æ•°æ®
    # æ³¨æ„dagger_trainer.pyé‡Œæœ‰æ–­ç‚¹ç»­ä¼ é€»è¾‘ï¼Œå¦‚æœè¯¥ç›®å½•å­˜åœ¨æ•°æ®ä¸”ä¸ä¸ºç©ºï¼Œåˆ™ä¸ä¼šæ¸…ç©ºï¼Œå¦‚æœå·²ç»è·‘å®Œå…¨éƒ¨æ•°æ®ï¼Œåˆ™ç›´æ¥åŠ è½½ï¼Œå³ä½¿æ˜¯Falseä¹ŸåŠ è½½
    preload_lmdb_features: True
    lmdb_features_dir: data/trajectories_dirs/cma_clip_pm_aug/trajectories.lmdb
    lmdb_map_size: 2e12

MODEL:
  policy_name: CMAPolicy

  INSTRUCTION_ENCODER:
    bidirectional: True

  # -------------------------------------------------------
  # ã€æ ¸å¿ƒä¿®æ”¹ã€‘å¿…é¡»æ˜¾å¼æ¤å…¥ CLIPï¼Œå¦åˆ™é»˜è®¤åŠ è½½ ResNet
  # -------------------------------------------------------
  RGB_ENCODER:
    cnn_type: "ClipVisualEncoder"
    output_size: 256
    trainable: True  # å¿…é¡»ä¸º True ä»¥è®­ç»ƒæŠ•å½±å±‚

  # å¼€å¯è¿›åº¦ç›‘æ§
  PROGRESS_MONITOR:
    use: True

# è¿è¡Œè¿™ä¸ªé…ç½®çš„ä»£ç 
# torchrun --nproc_per_node=4 --master_port=29505 run.py \
#     --exp-config vlnce_baselines/config/r2r_baselines/cma_clip_pm_aug.yaml \
#     --run-type train \
#     IL.load_from_ckpt True \
#     IL.ckpt_to_load "data/checkpoints/cma_clip_pm_aug/ckpt.19.pth" \
#     IL.is_requeue True \
#     SIMULATOR_GPU_IDS "[0,1,2,3]"

# æµ‹è¯•ä»£ç 
# python run.py \
#     --exp-config vlnce_baselines/config/r2r_baselines/cma_clip_pm_aug.yaml \
#     --run-type train \
#     SIMULATOR_GPU_IDS "[2]" \
#     TORCH_GPU_ID 2 \
#     NUM_ENVIRONMENTS 1 \
#     IL.DAGGER.update_size 20 \
#     IL.DAGGER.lmdb_features_dir data/trajectories_dirs/debug_test/trajectories.lmdb \
#     IL.epochs 2 \
#     IL.batch_size 2 \
#     TENSORBOARD_DIR data/tensorboard_dirs/debug_test \
#     CHECKPOINT_FOLDER data/checkpoints/debug_test \
#     IL.DAGGER.lmdb_commit_frequency 1  # ğŸ‘ˆ å…³é”®ä¿®æ”¹ï¼šæ¯è·‘å®Œ1æ¡æ•°æ®å°±ç«‹å³å­˜ç›˜ï¼Œç³»ç»Ÿè®¾å®šæ˜¯500æ¡ï¼Œéå¸¸å¤§ï¼Œä¸é€‚åˆæµ‹è¯•